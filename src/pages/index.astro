---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Contact from '../components/Contact.astro';
import LangSwitcher from '../components/LangSwitcher.astro';
import '../styles/global.css';
---

<BaseLayout title="Nawfal Hassani | Portfolio">
  <LangSwitcher />
  <main>
    <Hero />
    <Contact />
  </main>
  <footer class="py-6 px-6 text-center border-t" style="border-color: var(--theme-border);">
    <p class="text-xs" style="color: var(--theme-text-subtle);">© 2026 Nawfal Hassani</p>
  </footer>
</BaseLayout>

<script>
  const translations: Record<string, Record<string, string>> = {
    en: {
      role: 'Full-Stack <span class="role-highlight">Developer</span>',
      name: 'Nawfal<br />Hassani',
      tagline: 'Building digital experiences that blend design and engineering.',
      cta: 'Get in Touch',
      explore: 'Explore',
      back: 'Back',
      contactLabel: 'Contact',
      contactTitle: "Let's work together",
      contactDesc: 'Interested in collaborating or have a project in mind? Feel free to reach out.',
      aboutLabel: 'About',
      aboutDesc: "Curious and driven, I love building things from scratch. I learn by doing — experimenting, making mistakes, and always moving forward.",
      aboutYear: '2nd year — Programme Grande École',
      aboutTech: 'Tech Stack',
      aboutMindset: 'Mindset',
      aboutMindsetDesc: 'I believe every challenge is a chance to grow. I like combining logic, creativity, and problem-solving to build things that actually work.',
      menuAbout: 'About',
      menuAboutSub: 'Who I am & what drives me',
      menuProjects: 'Projects',
      menuProjectsSub: "What I've built",
      menuExperience: 'Experience',
      menuExperienceSub: 'My journey so far',
      menuBack: 'Back to menu',
      comingSoon: 'Coming soon...',
      menuCV: 'Download CV',
      expLabel: 'Journey',
      expYear1: '2024',
      expTitle1: 'Bac with honors',
      expDesc1: 'Graduated high school with honors. The beginning of the adventure.',
      expYear2: '2024 — 2025',
      expTitle2: 'Epitech Montpellier',
      expDesc2: '1st & 2nd year — Grande École program. Deep-dive into C, algorithms, and full-stack development.',
      expYear3: '2025',
      expTitle3: 'Internship — JDC Occitanie',
      expDesc3: '4-month internship as a web developer. Real-world full-stack experience.',
      expYear4: '2026',
      expTitle4: 'Projects & Hackathons',
      expDesc4: 'GenAI Hackathon (1st place), Salon du Cheval redesign, SMS Dashboard. 3rd year at Epitech.',
      projLabel: 'Projects',
      projTitle1: 'GenAI Hackathon',
      projBadge1: '1st Place',
      projDesc1: 'AI-powered application built during a 48h hackathon. Team project combining generative AI with a practical use case.',
      projTitle2: 'Salon du Cheval de Paris',
      projBadge2: 'Redesign',
      projDesc2: 'Complete website redesign for a horse show event. Modern UI with booking system and event management.',
      projTitle3: 'SMS Dashboard',
      projBadge3: 'Full-Stack',
      projDesc3: 'Dashboard for managing and monitoring SMS campaigns. Real-time analytics and message tracking.',
    },
    fr: {
      role: '<span class="role-highlight">Développeur</span> Full-Stack',
      name: 'Nawfal<br />Hassani',
      tagline: 'Créer des expériences digitales qui allient design et ingénierie.',
      cta: 'Me contacter',
      explore: 'Explorer',
      back: 'Retour',
      contactLabel: 'Contact',
      contactTitle: 'Travaillons ensemble',
      contactDesc: 'Un projet en tête ou envie de collaborer\u00a0? N\'hésitez pas à me contacter.',
      aboutLabel: 'À propos',
      aboutDesc: 'Curieux et déterminé, j\'aime construire des choses de zéro. J\'apprends en faisant, je m\'expérimente en me trompant, et je progresse sans jamais m\'arrêter.',
      aboutYear: '2e année — Programme Grande École',
      aboutTech: 'Technologies',
      aboutMindset: 'État d\'esprit',
      aboutMindsetDesc: 'Je crois que chaque défi est une occasion de progresser. J\'aime allier logique, créativité et résolution de problèmes pour construire des choses qui marchent vraiment.',
      menuAbout: 'Présentation',
      menuAboutSub: 'Qui je suis et ce qui me motive',
      menuProjects: 'Projets',
      menuProjectsSub: 'Ce que j\'ai construit',
      menuExperience: 'Parcours',
      menuExperienceSub: 'Mon parcours',
      menuBack: 'Retour au menu',
      comingSoon: 'Bientôt disponible...',
      menuCV: 'Télécharger CV',
      expLabel: 'Parcours',
      expYear1: '2024',
      expTitle1: 'Bac avec mention',
      expDesc1: 'Obtention du Bac avec mention. Le début de l\'aventure.',
      expYear2: '2024 — 2025',
      expTitle2: 'Epitech Montpellier',
      expDesc2: '1ère & 2ème année — Programme Grande École. Plongée dans le C, les algorithmes et le développement full-stack.',
      expYear3: '2025',
      expTitle3: 'Stage — JDC Occitanie',
      expDesc3: 'Stage de 4 mois en tant que développeur web. Expérience full-stack en conditions réelles.',
      expYear4: '2026',
      expTitle4: 'Projets & Hackathons',
      expDesc4: 'Hackathon GenAI (1ère place), refonte Salon du Cheval, Dashboard SMS. 3ème année à Epitech.',
      projLabel: 'Projets',
      projTitle1: 'Hackathon GenAI',
      projBadge1: '1ère place',
      projDesc1: 'Application alimentée par l\'IA construite lors d\'un hackathon de 48h. Projet d\'équipe combinant IA générative et cas d\'usage concret.',
      projTitle2: 'Salon du Cheval de Paris',
      projBadge2: 'Refonte',
      projDesc2: 'Refonte complète du site web pour un salon équestre. Interface moderne avec système de réservation et gestion d\'événements.',
      projTitle3: 'Dashboard SMS',
      projBadge3: 'Full-Stack',
      projDesc3: 'Tableau de bord pour la gestion et le suivi de campagnes SMS. Analyses en temps réel et suivi des messages.',
    },
    zh: {
      role: '全栈<span class="role-highlight">开发者</span>',
      name: 'Nawfal<br />Hassani',
      tagline: '构建融合设计与工程的数字体验。',
      cta: '联系我',
      explore: '探索',
      back: '返回',
      contactLabel: '联系方式',
      contactTitle: '一起合作',
      contactDesc: '有项目想法或者想合作？欢迎联系我。',
      aboutLabel: '关于我',
      aboutDesc: '好奇心强，有干劲。我喜欢从零开始构建东西，通过实践来学习——不断尝试，不怕犯错，始终前进。',
      aboutYear: '第二年 — 工程师项目',
      aboutTech: '技术栈',
      aboutMindset: '理念',
      aboutMindsetDesc: '我相信每个挑战都是成长的机会。我喜欢将逻辑、创造力和解决问题结合起来，构建真正有用的东西。',
      menuAbout: '关于我',
      menuAboutSub: '我是谁，我的动力',
      menuProjects: '项目',
      menuProjectsSub: '我做过的项目',
      menuExperience: '经历',
      menuExperienceSub: '我的历程',
      menuBack: '返回菜单',
      comingSoon: '即将推出...',
      menuCV: '下载简历',
      expLabel: '历程',
      expYear1: '2024',
      expTitle1: '高中毕业（优秀）',
      expDesc1: '以优异成绩高中毕业，冒险的开始。',
      expYear2: '2024 — 2025',
      expTitle2: 'Epitech 蒙彼利埃',
      expDesc2: '第1和第2年 — 工程师项目。深入学习C语言、算法和全栈开发。',
      expYear3: '2025',
      expTitle3: '实习 — JDC Occitanie',
      expDesc3: '4个月网页开发实习。真实的全栈开发经验。',
      expYear4: '2026',
      expTitle4: '项目与黑客马拉松',
      expDesc4: 'GenAI黑客马拉松（第一名）、马展网站重构、短信仪表盘。Epitech第三年。',
      projLabel: '项目',
      projTitle1: 'GenAI 黑客马拉松',
      projBadge1: '第一名',
      projDesc1: '48小时黑客马拉松中开发的AI应用。团队项目，将生成式AI与实际应用场景相结合。',
      projTitle2: '巴黎马展 Salon du Cheval de Paris',
      projBadge2: '网站重构',
      projDesc2: '马展活动网站的完整重新设计。现代界面，包含预订系统和活动管理。',
      projTitle3: 'SMS 仪表盘',
      projBadge3: '全栈',
      projDesc3: '用于管理和监控短信营销的仪表盘。实时分析和消息追踪。',
    },
    ar: {
      role: '<span class="role-highlight">مطور</span> ويب متكامل',
      name: 'Nawfal<br />Hassani',
      tagline: 'بناء تجارب رقمية تجمع بين التصميم والهندسة.',
      cta: 'تواصل معي',
      explore: 'استكشف',
      back: 'رجوع',
      contactLabel: 'اتصل',
      contactTitle: 'لنعمل معًا',
      contactDesc: 'هل لديك مشروع في ذهنك أو ترغب في التعاون؟ لا تتردد في التواصل.',
      aboutLabel: 'عني',
      aboutDesc: 'فضولي ومصمم، أحب بناء الأشياء من الصفر. أتعلم بالممارسة — أجرّب، أخطئ، وأتقدم دائمًا.',
      aboutYear: 'السنة الثانية — برنامج المهندسين',
      aboutTech: 'التقنيات',
      aboutMindset: 'طريقة التفكير',
      aboutMindsetDesc: 'أؤمن أن كل تحدٍّ هو فرصة للنمو. أحب الجمع بين المنطق والإبداع وحل المشكلات لبناء أشياء تعمل فعلاً.',
      menuAbout: 'عني',
      menuAboutSub: 'من أنا وما يحفزني',
      menuProjects: 'المشاريع',
      menuProjectsSub: 'ما قمت ببنائه',
      menuExperience: 'الخبرة',
      menuExperienceSub: 'مسيرتي حتى الآن',
      menuBack: 'العودة للقائمة',
      comingSoon: 'قريبًا...',
      menuCV: 'تحميل السيرة الذاتية',
      expLabel: 'المسيرة',
      expYear1: '٢٠٢٤',
      expTitle1: 'البكالوريا بتفوق',
      expDesc1: 'الحصول على البكالوريا بتفوق. بداية المغامرة.',
      expYear2: '٢٠٢٤ — ٢٠٢٥',
      expTitle2: 'Epitech مونبلييه',
      expDesc2: 'السنة الأولى والثانية — برنامج المهندسين. تعمّق في لغة C والخوارزميات والتطوير الكامل.',
      expYear3: '٢٠٢٥',
      expTitle3: 'تدريب — JDC Occitanie',
      expDesc3: 'تدريب لمدة 4 أشهر كمطور ويب. تجربة واقعية في التطوير الكامل.',
      expYear4: '٢٠٢٦',
      expTitle4: 'مشاريع وهاكاثونات',
      expDesc4: 'هاكاثون GenAI (المركز الأول)، إعادة تصميم صالون الخيول، لوحة تحكم الرسائل. السنة الثالثة في Epitech.',
      projLabel: 'المشاريع',
      projTitle1: 'هاكاثون GenAI',
      projBadge1: 'المركز الأول',
      projDesc1: 'تطبيق يعتمد على الذكاء الاصطناعي تم تطويره خلال هاكاثون مدته 48 ساعة. مشروع جماعي يجمع بين الذكاء الاصطناعي التوليدي وحالة استخدام عملية.',
      projTitle2: 'صالون الخيول بباريس',
      projBadge2: 'إعادة تصميم',
      projDesc2: 'إعادة تصميم كاملة لموقع معرض الخيول. واجهة حديثة مع نظام حجز وإدارة فعاليات.',
      projTitle3: 'لوحة تحكم الرسائل',
      projBadge3: 'تطوير كامل',
      projDesc3: 'لوحة تحكم لإدارة ومراقبة حملات الرسائل القصيرة. تحليلات فورية وتتبع الرسائل.',
    },
  };

  const rtlLangs = ['ar'];

  function setLang(lang: string) {
    const t = translations[lang];
    if (!t) return;

    // Update all translatable elements
    document.querySelectorAll('[data-i18n]').forEach((el) => {
      const key = el.getAttribute('data-i18n')!;
      if (t[key]) {
        el.innerHTML = t[key];
      }
    });

    // Handle RTL
    const isRtl = rtlLangs.includes(lang);
    document.documentElement.dir = isRtl ? 'rtl' : 'ltr';

    // Update active button
    document.querySelectorAll('.lang-btn').forEach((btn) => {
      btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
    });

    // Save preference
    localStorage.setItem('lang', lang);
  }

  function init() {
    const saved = localStorage.getItem('lang') || 'fr';
    setLang(saved);

    document.querySelectorAll('.lang-btn').forEach((btn) => {
      btn.addEventListener('click', () => {
        setLang(btn.getAttribute('data-lang')!);
      });
    });
  }

  document.addEventListener('DOMContentLoaded', init);
  document.addEventListener('astro:page-load', init);
</script>
